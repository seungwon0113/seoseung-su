{% extends "base.html" %}
{% load static %}

{% block title %}문의하기 - SeoSeung-Soo{% endblock %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/inquire/inquire.css' %}">
{% endblock %}

{% block content %}
<div class="inquire-container">
    <div class="inquire-header">
        <h1>문의하기</h1>
        <p>궁금한 점이나 문의사항이 있으시면 언제든지 연락해주세요.<br>빠른 시일 내에 답변드리겠습니다.</p>
    </div>

    <form method="post" class="inquire-form">
        {% csrf_token %}
        
        {% if not user.is_authenticated %}
        <div class="form-group">
            <label for="id_email" class="form-label">이메일 주소</label>
            {{ form.email }}
            {% if form.email.errors %}
                <div class="form-error">{{ form.email.errors.0 }}</div>
            {% endif %}
            <div class="form-help">답변을 받을 이메일 주소를 입력해주세요.</div>
        </div>
        {% endif %}

        <div class="form-group">
            <label for="id_item" class="form-label">문의 유형</label>
            {{ form.item }}
            {% if form.item.errors %}
                <div class="form-error">{{ form.item.errors.0 }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_title" class="form-label">제목</label>
            {{ form.title }}
            {% if form.title.errors %}
                <div class="form-error">{{ form.title.errors.0 }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_content" class="form-label">문의 내용</label>
            {{ form.content }}
            {% if form.content.errors %}
                <div class="form-error">{{ form.content.errors.0 }}</div>
            {% endif %}
            <div class="form-help">문의하실 내용을 자세히 적어주세요. (최대 1000자)</div>
        </div>

        <button type="submit" class="submit-btn">문의하기</button>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('.inquire-form');
    const submitBtn = document.querySelector('.submit-btn');
    
    if (form && submitBtn) {
        form.addEventListener('submit', function() {
            submitBtn.classList.add('loading');
            submitBtn.disabled = true;
        });
    }
    
    // 문의 폼 내의 입력 요소들만 대상으로 함
    const inputs = document.querySelectorAll('.inquire-form input, .inquire-form select, .inquire-form textarea');
    inputs.forEach(function(input) {
        if (!input.classList.contains('form-input') && !input.classList.contains('form-select') && !input.classList.contains('form-textarea')) {
            input.classList.add('form-input');
            if (input.tagName === 'SELECT') {
                input.classList.remove('form-input');
                input.classList.add('form-select');
            }
            if (input.tagName === 'TEXTAREA') {
                input.classList.remove('form-input');
                input.classList.add('form-textarea');
            }
        }
    });
    
    const errorElements = document.querySelectorAll('.inquire-form .form-error');
    errorElements.forEach(function(error) {
        const formGroup = error.closest('.form-group');
        if (formGroup) {
            formGroup.classList.add('has-error');
        }
    });
});
</script>
{% endblock %}